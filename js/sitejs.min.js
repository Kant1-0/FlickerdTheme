/** Version 1.0.2 **/(function(a){a.fn.toggleBox=function(b){a(this).bind("click",function(){var d=a(b.toggleBox);$this=a(this);if($this.hasClass("closed")){var c=a.extend({opacity:1},b);d.animate(c,500,function(){$this.removeClass("closed")})}else{var c=a.extend({opacity:0.1},b);d.animate(c,500,function(){$this.addClass("closed")})}})};a.fn.imageSwitch=function(){a(this).bind("click",function(b){var c=a(this).attr("href");b.preventDefault();a("#imgView").fadeOut("fast",function(){a("#imageDisplay").addClass("loaderbg");var d=new Image();a(d).load(function(){a("#imgView").attr("src",c);a("#imgView").fadeIn();a("#imageDisplay").removeClass("loaderbg")}).attr("src",c)})})};a.fn.commentToggle=function(b){a(this).bind("click",function(d){d.preventDefault();var c=a(b);if(c.is(":hidden")){a(c).slideDown();a(this).text("[ Hide ]")}else{a(c).slideUp();a(this).text("[ Show ]")}})};a.fn.modBox=function(){a(this).addClass("metatab closed");a("#imagemetadata_data").css("display","none")};a.fn.previewImage=function(){a(this).bind("mouseover",function(){var b=a(this);var c=window.setTimeout(function(){var e=b.parent("a").attr("href");var h=b.attr("data-preview_url");var g=b.width();var d=b.height();b.after('<div class="image-overlay-loader loaderbg" style="width:'+g+"px;height:"+d+'px"><img src="'+e+'" id="overlayImg" style="display:none" /></div>');var f=new Image();a(f).load(function(){a("#overlayImg").attr("src",h);a("#overlayImg").fadeIn();a(".image-overlay-loader").removeClass("loaderbg").css({width:f.width,height:f.height})}).attr("src",h);a("#overlayImg").bind("mouseleave",function(){a(".image-overlay-loader").remove()})},flickerdPreviewDelay);b.bind("mouseleave",function(){window.clearTimeout(c)})})};a(document).ready(function(){a("#toggle").toggleBox({toggleBox:"#toggleBox",width:"toggle",height:"toggle"});a(".metadata_title").modBox();a(".metadata_title").toggleBox({toggleBox:"#imagemetadata_data",height:"toggle"});a(".switch").imageSwitch();a("#addComment").commentToggle("#commententry");a("#showComments").commentToggle("#comments");a("#flkr-feed > ul > li > a > img").previewImage()})})(jQuery);
